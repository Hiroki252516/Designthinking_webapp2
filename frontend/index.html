<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cup Ramen Lottery</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <div class="bg"></div>
  <main class="app">
    <header class="app-header">
      <div class="brand">CUP RAMEN</div>
      <h1>抽選キャンペーン</h1>
      <p class="subtitle">蓋の裏にある4桁の識別番号でチャレンジ</p>
    </header>

    <section id="screen-input" class="screen is-active" aria-live="polite">
      <div class="card">
        <h2>識別番号入力</h2>
        <p>蓋の裏の4桁の番号を入力してください。</p>
        <div class="code-input" aria-label="識別番号">
          <div class="code-box" data-index="0"></div>
          <div class="code-box" data-index="1"></div>
          <div class="code-box" data-index="2"></div>
          <div class="code-box" data-index="3"></div>
        </div>
        <div class="keypad" aria-label="テンキー">
          <button class="key" data-key="1">1</button>
          <button class="key" data-key="2">2</button>
          <button class="key" data-key="3">3</button>
          <button class="key" data-key="4">4</button>
          <button class="key" data-key="5">5</button>
          <button class="key" data-key="6">6</button>
          <button class="key" data-key="7">7</button>
          <button class="key" data-key="8">8</button>
          <button class="key" data-key="9">9</button>
          <button class="key ghost" data-key="clear">クリア</button>
          <button class="key" data-key="0">0</button>
          <button class="key ghost" data-key="back">←</button>
        </div>
        <p id="input-error" class="input-error hidden" role="alert" aria-live="assertive"></p>
        <button id="submit-btn" class="primary" disabled>確認</button>
        <p class="helper">キーボード入力にも対応しています。</p>
      </div>
    </section>

    <section id="screen-result" class="screen" aria-live="polite">
      <div class="card dark">
        <h2>ルーレット結果</h2>
        <div class="slot-machine" id="slot-machine">
          <div class="reel" id="reel-0">0</div>
          <div class="reel" id="reel-1">0</div>
          <div class="reel" id="reel-2">0</div>
        </div>
        <div class="result-message" id="result-message">ルーレットを実行してください</div>
        <p class="result-detail" id="result-detail">「ルーレットを実行する」を押すと抽選が始まります。</p>
        <div class="result-actions">
          <button id="start-roulette" class="primary">ルーレットを実行する</button>
          <button id="show-coupon" class="primary hidden">割引QRを表示</button>
          <button id="retry" class="secondary">トップに戻る</button>
        </div>
      </div>
    </section>

    <section id="screen-coupon" class="screen" aria-live="polite">
      <div class="card">
        <h2>割引クーポン</h2>
        <div class="coupon-panel">
          <div class="qr" id="qr"></div>
          <div class="coupon-text">
            <div class="label">このQRコードを店舗で提示してください</div>
            <div class="token" id="coupon-token"></div>
            <div class="expiry" id="coupon-expiry"></div>
          </div>
        </div>
        <button id="back-home" class="secondary">トップに戻る</button>
      </div>
    </section>
  </main>

  <script src="/static/qr.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
